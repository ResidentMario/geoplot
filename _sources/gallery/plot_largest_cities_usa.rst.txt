.. note::
    :class: sphx-glr-download-link-note

    Click :ref:`here <sphx_glr_download_gallery_plot_largest_cities_usa.py>` to download the full example code
.. rst-class:: sphx-glr-example-title

.. _sphx_glr_gallery_plot_largest_cities_usa.py:


Pointplot of US cities by population
====================================

This example, taken from the User Guide, plots cities in the contiguous United States by their
population. It demonstrates some of the range of styling options available in ``geoplot``.



.. image:: /gallery/images/sphx_glr_plot_largest_cities_usa_001.png
    :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    /Users/alex/miniconda3/envs/geoplot-dev/lib/python3.6/site-packages/scipy/stats/stats.py:1633: FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.
      return np.add.reduce(sorted[indexer] * weights, axis=axis) / sumval





|


.. code-block:: default



    import geopandas as gpd
    import geoplot as gplt
    import geoplot.crs as gcrs
    import matplotlib.pyplot as plt
    import mapclassify as mc

    continental_usa_cities = gpd.read_file(gplt.datasets.get_path('usa_cities'))
    continental_usa_cities = continental_usa_cities.query('STATE not in ["AK", "HI", "PR"]')
    contiguous_usa = gpd.read_file(gplt.datasets.get_path('contiguous_usa'))
    scheme = mc.Quantiles(continental_usa_cities['POP_2010'], k=5)

    ax = gplt.polyplot(
        contiguous_usa, 
        zorder=-1,
        linewidth=1,
        projection=gcrs.AlbersEqualArea(),
        edgecolor='white',
        facecolor='lightgray',
        figsize=(8, 12)
    )
    gplt.pointplot(
        continental_usa_cities, 
        scale='POP_2010',
        limits=(2, 30),
        hue='POP_2010',
        cmap='Blues',
        scheme=scheme,
        legend=True,
        legend_var='scale',
        legend_values=[8000000, 2000000, 1000000, 100000],
        legend_labels=['8 million', '2 million', '1 million', '100 thousand'],
        legend_kwargs={'frameon': False, 'loc': 'lower right'},
        ax=ax
    )


    plt.title("Large cities in the contiguous United States, 2010")
    plt.savefig("largest-cities-usa.png", bbox_inches='tight', pad_inches=0.1)


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  4.387 seconds)


.. _sphx_glr_download_gallery_plot_largest_cities_usa.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download

     :download:`Download Python source code: plot_largest_cities_usa.py <plot_largest_cities_usa.py>`



  .. container:: sphx-glr-download

     :download:`Download Jupyter notebook: plot_largest_cities_usa.ipynb <plot_largest_cities_usa.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
