.. note::
    :class: sphx-glr-download-link-note

    Click :ref:`here <sphx_glr_download_gallery_plot_obesity.py>` to download the full example code
.. rst-class:: sphx-glr-example-title

.. _sphx_glr_gallery_plot_obesity.py:


Cartogram of US states by obesity rate
======================================

This example ``cartogram`` showcases regional trends for obesity in the United States. Rugged
mountain states are the healthiest; the deep South, the unhealthiest.

This example inspired by the `"Non-Contiguous Cartogram" <https://bl.ocks.org/mbostock/4055908>`_
example in the D3.JS example gallery.



.. image:: /gallery/images/sphx_glr_plot_obesity_001.png
    :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    /Users/alex/miniconda3/envs/geoplot-dev/lib/python3.6/site-packages/scipy/stats/stats.py:1633: FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.
      return np.add.reduce(sorted[indexer] * weights, axis=axis) / sumval





|


.. code-block:: default



    import pandas as pd
    import geopandas as gpd
    import geoplot as gplt
    import geoplot.crs as gcrs
    import matplotlib.pyplot as plt

    # load the data
    obesity_by_state = pd.read_csv(gplt.datasets.get_path('obesity_by_state'), sep='\t')
    contiguous_usa = gpd.read_file(gplt.datasets.get_path('contiguous_usa'))
    contiguous_usa['Obesity Rate'] = contiguous_usa['state'].map(
        lambda state: obesity_by_state.query("State == @state").iloc[0]['Percent']
    )


    ax = gplt.cartogram(
        contiguous_usa,
        scale='Obesity Rate', limits=(0.75, 1),
        projection=gcrs.AlbersEqualArea(central_longitude=-98, central_latitude=39.5),
        hue='Obesity Rate', cmap='Reds', k=5,
        linewidth=0.5,
        legend=True, legend_kwargs={'loc': 'lower right'}, legend_var='hue',
        figsize=(12, 12)
    )
    gplt.polyplot(contiguous_usa, facecolor='lightgray', edgecolor='None', ax=ax)

    plt.title("Adult Obesity Rate by State, 2013")
    plt.savefig("obesity.png", bbox_inches='tight', pad_inches=0.1)


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  2.269 seconds)


.. _sphx_glr_download_gallery_plot_obesity.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download

     :download:`Download Python source code: plot_obesity.py <plot_obesity.py>`



  .. container:: sphx-glr-download

     :download:`Download Jupyter notebook: plot_obesity.ipynb <plot_obesity.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
